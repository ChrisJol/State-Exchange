<html>

<head>
    <title>New Post!</title>
    <link rel='stylesheet' href='stylesheets/global.css'>
</head>
<div class="layout-header">
    <div class="layout-body grid">
        <a href="index" class="grid__col--3">
            <h1 class="topper__title">State Exchange</h1>
        </a>
        <form class="form grid__col--7">
            <input type="text" placeholder="Search" class="form__input">
            <button type="submit" class="form__button">Search</button>
        </form>
        <img src="images/user.png" class="topper__img grid__col--2">
    </div>
    <div class="nav layout-body">
        <a href="index" class="nav__item">Home</a>
        <a href="about" class="nav__item">About</a>
        <a class="nav__item">For Sale</a>
        <a href="newpost" class="nav__item">New Post</a>
        <a class="nav__item">Dashboard</a>
    </div>
</div>

<div id="app-newpost">
    <div class="layout-body">
        <h1>Create a New Post</h1>
        <form class="form newpost grid">
            <label for="title" class="form__label grid__col--1">Title</label>
            <input v-model='title' type="input" class="title form__input--border grid__col--8">
            <label class="grid__col--3 form__input--border" for="addImage">Add Image</label>
            <input accept="image/*" id="addImage" type="file" class="form__image-input grid__col--3"></input>
            <label for="desc" class="form__label grid__col--1">Description</label>
            <textarea v-model='desc' class="desc form__textarea grid__col--11" form="newpost"></textarea>
            <!--TODO: Pull list of categories from database-->
            <label class="form__label grid__col--1">Category</label>
            <select v-model='categorySelected' class="form__select grid__col--3">
                <option v-for='category in categories'>{{ category }}</option>
                <!--
                <option>Category 1</option>
                <option>Category 2</option>
                <option>Category 3</option>
                <option>Category 4</option>
                -->
            </select>
            <div class="grid__col--8"></div>
            <label for="price" class="form__label grid__col--1">Price</label>
            <input v-model='price' type="number" class="form__input--border grid__col--2">
            <button type="button" class="form__button--border grid__col--8">Cancel</button>
            <button v-on:click.prevent='sendData' type="submit" class="form__button--border grid__col--1">Post</button>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="javascripts/SearchResults.js"></script>
<script>
    var app = new Vue({
        el: '#app-newpost',
        data: {
            title: '',
            desc: '',
            categorySelected: 'Select Category',
            categories: ['Select Category','Electronics', 'Books', 'Furniture', 'Toys'],
            price: '',
            img: '',
        },
        methods: {
            sendData: function() {
                axios.get('http://ec2-18-224-39-11.us-east-2.compute.amazonaws.com:3001/testmysql', formData = {
                    postTitle: app.title,
                    postDesc: app.desc,
                    postPrice: app.price,
                    postCat: app.categorySelected,
                });
                console.log(formData);
            }
        }
    })
</script>
</html>